syntax = "proto3";

option go_package = "/proto";


// Servicio que manejaran entre Michael y Lester
service MichaelLester {

  // Funcion remota 1: recibe una solicitud de oferta y devuelve una oferta disponible
  rpc EntregarOferta (SolicitudOferta) returns (OfertaDisponible); 
  rpc ConfirmarOferta (Confirmacion) returns (AckConfirmacion);
  rpc Pagar (Monto) returns (ConfirmarPago);

}

// Solicitud de oferta que enviara Michael
message SolicitudOferta {
}

// Oferta disponible que enviara Lester luego de recibir una solicitud, incluye el botin inicial, la probabilidad de exito de Trevor y Franklin y el Riesgo policial
message OfertaDisponible {
  bool disponible = 1;
  int32 botin_inicial = 2;
  float probabilidad_franklin = 3;
  float probabilidad_trevor = 4;
  float riesgo_policial = 5;
}

message Confirmacion {
  bool aceptada = 1;
}

message AckConfirmacion {}

// Servicio que manejara Michael con Franklin o Trevor (segun quien se escoja para la fase 2)
service MichaelTrevorFranklin {
  // FUncion remota 1: recibe un informe de la distraccion y devuelve el resultado de la distraccion 
  rpc InformarEstadoSegundaFase (InformarDistraccion) returns (ResultadoDistraccion);
  // FUncion remota 2: recibe un informe del golpe y devuelve el resultado del golpe 
  rpc InformarEstadoTerceraFase (InformarGolpe) returns (ResultadoGolpe);

  rpc Pagar (Monto) returns (ConfirmarPago);
}

// Informe de trabajo que enviara Michael que incluye la probabilidad de exito del trabajador
message InformarDistraccion {
  float probabilidad_exito = 2;
}

// Resultado de la mision enviado por Franklin o Trevor que incluye un indicador sobre si la mision fue un exito o fracaso
message ResultadoDistraccion {
  bool exito = 1;
}

message InformarGolpe {
  float probabilidad_exito = 2;
}

// Resultado de la mision enviado por Franklin o Trevor que incluye un indicador sobre si la mision fue un exito o fracaso
message ResultadoGolpe {
  bool exito = 1;
  int32 botin = 2;
}


message Monto {
  int32 correspondencia = 1;
  int32 total = 2;
}

message ConfirmarPago {
  bool correcto = 1;
  string mensaje = 2;
}